# é¡¹ç›®ä½¿ç”¨åˆ°çš„å‡½æ•°

## ğŸ’ŠåŠ¨ç”»æ’å€¼å‡½æ•°

```cpp
void animation(float *a, float *a_trg, uint8_t n)
{
  // if (fabs(*a - *a_trg) < 0.15)
  //   *a = *a_trg;
  // if (*a != *a_trg)
  //   *a += (*a_trg - *a) / (n / 10.0);
    if (*a != *a_trg)
  {
    if (fabs(*a - *a_trg) < 0.15f) *a = *a_trg;
    else *a += (*a_trg - *a) / (n / 10.0f);
  }
}
```

## ğŸ•å®šæ—¶å™¨å¸¦å›è°ƒå‡½æ•°


`TIMER_typeDef` ç»“æ„ä½“
```c
typedef struct
{
    long long timenow;
    int intval;

} TIMER_typeDef;
```

```cpp

`timerGo` å‡½æ•°
void timerGo(TIMER_typeDef *t1, void (*func)())
{
    if (millis() - t1->timenow > t1->intval)
    {
        t1->timenow = millis();
        func();
    }
}

void time_event(){
    ....
}

// useage
timerGo(&t1,&time_event)
```

## â™»ï¸ç”»æ•°æ®æ¡å‡½æ•°
::: tip
    å‚ç›´progress bar
:::
```cpp
// percent -> æ˜¾ç¤ºçš„é‡

void drawMeter(int x, int y, int w, int h, int percent)
{
  // å¯¹åº”ç”»å‡ºæ¥çš„é‡  
  int drawpercent = map(percent, 0, 100, 0, h);

  int drawX = x;
  int drawY = y + h - drawpercent;
  int drawW = w;
  int drawH = drawpercent;
  u8g2.drawBox(drawX, drawY, drawW, drawH);
}
```




