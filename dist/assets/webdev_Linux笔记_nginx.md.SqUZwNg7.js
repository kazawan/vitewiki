import{_ as s,c as i,o as a,V as t}from"./chunks/framework.6DK9nIBo.js";const C=JSON.parse('{"title":"Ubuntu 安装 nginx","description":"","frontmatter":{},"headers":[],"relativePath":"webdev/Linux笔记/nginx.md","filePath":"webdev/Linux笔记/nginx.md"}'),n={name:"webdev/Linux笔记/nginx.md"},h=t(`<h1 id="ubuntu-安装-nginx" tabindex="-1">Ubuntu 安装 nginx <a class="header-anchor" href="#ubuntu-安装-nginx" aria-label="Permalink to &quot;Ubuntu 安装 nginx&quot;">​</a></h1><p><a href="https://zhuanlan.zhihu.com/p/138007915?utm_id=0" target="_blank" rel="noreferrer">🔗参考-如何在 Ubuntu 20.04 上安装 Nginx</a></p><h2 id="_1-准备" tabindex="-1">1.准备 <a class="header-anchor" href="#_1-准备" aria-label="Permalink to &quot;1.准备&quot;">​</a></h2><p>在继续之前，保证以 sudo 用户身份登录，并且你不能运行 Apache 或者 其他处理进程在80端口和443端口。</p><h2 id="_2-安装" tabindex="-1">2.安装 <a class="header-anchor" href="#_2-安装" aria-label="Permalink to &quot;2.安装&quot;">​</a></h2><p>Nginx 在默认的 Ubuntu 源仓库中可用。想要安装它，运行下面的命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><p>一旦安装完成，Nginx 将会自动被启动。你可以运行下面的命令来验证它</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><p>输出类似下面这样：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">●</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> A</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> high</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> performance</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> web</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reverse</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Loaded:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/lib/systemd/system/nginx.service; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vendor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> preset:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Active:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (running) since Sat 2020-05-02 20:25:43 UTC; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">13s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span></code></pre></div><h2 id="_3-配置防火墙-疼讯云-阿里云有外部防火墙" tabindex="-1">3.配置防火墙(疼讯云,阿里云有外部防火墙) <a class="header-anchor" href="#_3-配置防火墙-疼讯云-阿里云有外部防火墙" aria-label="Permalink to &quot;3.配置防火墙(疼讯云,阿里云有外部防火墙)&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Nginx Full&#39;</span></span></code></pre></div><p>验证</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span></code></pre></div><p>输出将会像下面这样：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Status:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> active</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">To</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         Action</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      From</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                         ------</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      ----</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">22/tcp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                     ALLOW</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Anywhere</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Full</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                 ALLOW</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Anywhere</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">22/tcp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (v6)                ALLOW       Anywhere (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">v6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Full</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (v6)            ALLOW       Anywhere (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">v6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="获取conf路劲" tabindex="-1">获取conf路劲 <a class="header-anchor" href="#获取conf路劲" aria-label="Permalink to &quot;获取conf路劲&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#注意大写</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span></span></code></pre></div><p>输出</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx/1.18.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Ubuntu)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OpenSSL</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2022</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TLS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SNI</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> support</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enabled</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arguments:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-cc-opt=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-g -O2 -ffile-prefix-map=/build/nginx-zctdR4/nginx-1.18.0=. -flto=auto -ffat-lto-objects -flto=auto -ffat-lto-objects -fstack-protector-strong -Wformat -Werror=format-security -fPIC -Wdate-time -D_FORTIFY_SOURCE=2&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-ld-opt=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-Wl,-Bsymbolic-functions -flto=auto -ffat-lto-objects -flto=auto -Wl,-z,relro -Wl,-z,now -fPIC&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --prefix=/usr/share/nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --conf-path=/etc/nginx/nginx.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --http-log-path=/var/log/nginx/access.log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --error-log-path=/var/log/nginx/error.log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --lock-path=/var/lock/nginx.lock</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --pid-path=/run/nginx.pid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --modules-path=/usr/lib/nginx/modules</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --http-client-body-temp-path=/var/lib/nginx/body</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --http-fastcgi-temp-path=/var/lib/nginx/fastcgi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --http-proxy-temp-path=/var/lib/nginx/proxy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --http-scgi-temp-path=/var/lib/nginx/scgi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --http-uwsgi-temp-path=/var/lib/nginx/uwsgi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-compat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-debug</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-pcre-jit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_ssl_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_stub_status_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_realip_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_auth_request_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_v2_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_dav_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_slice_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-dynamic-module=/build/nginx-zctdR4/nginx-1.18.0/debian/modules/http-geoip2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_addition_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_gunzip_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_gzip_static_module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-http_sub_module</span></span></code></pre></div><h2 id="nginx-命令-补充" tabindex="-1">nginx 命令 (补充) <a class="header-anchor" href="#nginx-命令-补充" aria-label="Permalink to &quot;nginx 命令 (补充)&quot;">​</a></h2>`,22),l=[h];function p(e,k,F,d,r,g){return a(),i("div",null,l)}const c=s(n,[["render",p]]);export{C as __pageData,c as default};
