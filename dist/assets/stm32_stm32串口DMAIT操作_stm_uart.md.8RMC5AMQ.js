import{_ as s,c as i,o as a,V as n}from"./chunks/framework.6DK9nIBo.js";const t="/assets/uart01.v8VI6LeN.png",o=JSON.parse('{"title":"ğŸ‘‚ Stm32 ä¸²å£æ“ä½œ","description":"","frontmatter":{},"headers":[],"relativePath":"stm32/stm32ä¸²å£DMAITæ“ä½œ/stm_uart.md","filePath":"stm32/stm32ä¸²å£DMAITæ“ä½œ/stm_uart.md"}'),h={name:"stm32/stm32ä¸²å£DMAITæ“ä½œ/stm_uart.md"},l=n('<h1 id="stm32-ä¸²å£æ“ä½œ" tabindex="-1">ğŸ‘‚ Stm32 ä¸²å£æ“ä½œ <a class="header-anchor" href="#stm32-ä¸²å£æ“ä½œ" aria-label="Permalink to &quot;:ear: Stm32 ä¸²å£æ“ä½œ&quot;">â€‹</a></h1><h2 id="_1-æ¥æ”¶-å®šé•¿-é…ç½®" tabindex="-1">1:æ¥æ”¶ <code>å®šé•¿</code> é…ç½® <a class="header-anchor" href="#_1-æ¥æ”¶-å®šé•¿-é…ç½®" aria-label="Permalink to &quot;1:æ¥æ”¶ `å®šé•¿` é…ç½®&quot;">â€‹</a></h2><h3 id="é…ç½®cubemx" tabindex="-1">é…ç½®cubemx <a class="header-anchor" href="#é…ç½®cubemx" aria-label="Permalink to &quot;é…ç½®cubemx&quot;">â€‹</a></h3><p>æ³¨æ„é…ç½® <code>nvic</code> å…¨å±€ä¸­æ–­ <img src="'+t+`" alt="img"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>å¦‚ä½¿ç”¨ä¸­æ–­æ¥æ”¶ åªéœ€æ”¹å˜ä¸º<code>HAL_UART_Receive_IT()</code> <code>HAL_UART_Transmit_IT()</code> å³å¯ ğŸ“–<code>HAL_UART_Receive_IT()</code> éœ€è¦æ·»åŠ size</p></div><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint8_t</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> rev_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;NOMS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å…¨å±€å˜é‡</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HAL_UART_Receive_DMA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">huart1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rev_data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åœ¨whileå‰äº§ç”Ÿä¸€æ¬¡</span></span></code></pre></div><p>æ¥æ”¶ä¸­æ–­ <code>HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)</code></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HAL_UART_RxCpltCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(UART_HandleTypeDef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">huart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(huart-&gt;Instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> USART1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //æŠŠæ¥æ”¶åˆ°çš„ä¿¡æ¯è¿”å›æ‰“å°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    HAL_UART_Transmit_DMA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">huart1, rev_data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //å…³é—­è¿‡åŠä¸­æ–­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //é‡æ–°å¯åŠ¨ä¸€æ¬¡æ¥æ”¶ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  HAL_UART_Receive_DMA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">huart1, rev_data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_2-æ¥æ”¶-ä¸å®šé•¿-é…ç½®" tabindex="-1">2:æ¥æ”¶ <code>ä¸å®šé•¿</code> é…ç½® <a class="header-anchor" href="#_2-æ¥æ”¶-ä¸å®šé•¿-é…ç½®" aria-label="Permalink to &quot;2:æ¥æ”¶ \`ä¸å®šé•¿\` é…ç½®&quot;">â€‹</a></h2><h3 id="é…ç½®cubemx-1" tabindex="-1">é…ç½®cubemx <a class="header-anchor" href="#é…ç½®cubemx-1" aria-label="Permalink to &quot;é…ç½®cubemx&quot;">â€‹</a></h3><p>åŒä¸Š</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint8_t</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> rev_data2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;NOMS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HAL_UARTEx_ReceiveToIdle_DMA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">huart1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rev_data2, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rev_data2));</span></span></code></pre></div><p>æ¥æ”¶ç©ºé—²ä¸­æ–­ <code>void HAL_UARTEx_RxEventCallback(UART_HandleTypeDef *huart, uint16_t Size)</code></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HAL_UARTEx_RxEventCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(UART_HandleTypeDef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">huart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint16_t</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> Size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(huart </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">huart1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    HAL_UART_Transmit_DMA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">huart1, rev_data2, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  HAL_UARTEx_ReceiveToIdle_DMA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">huart1, rev_data2, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rev_data2));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div>`,14),p=[l];function k(e,E,d,r,c,g){return a(),i("div",null,p)}const _=s(h,[["render",k]]);export{o as __pageData,_ as default};
