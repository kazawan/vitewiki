import{_ as s,c as i,o as a,V as n}from"./chunks/framework.6DK9nIBo.js";const l="data:image/png;base64,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",h="/assets/2.UJejt_3e.png",p="/assets/3.Ssz1frYY.png",t="/assets/8.tZZZ0-2Y.png",e="/assets/4.nvscWoWo.png",k="/assets/5.xcCKRueJ.png",d="/assets/6.Ui97UT4O.png",r="/assets/7.0QfB7r9z.png",C=JSON.parse('{"title":"LVGL 移植到 ESP32-S3","description":"","frontmatter":{},"headers":[],"relativePath":"arduino/LVGL/lvgl移植esp32S3-ARDUINO.md","filePath":"arduino/LVGL/lvgl移植esp32S3-ARDUINO.md"}'),E={name:"arduino/LVGL/lvgl移植esp32S3-ARDUINO.md"},o=n(`<h1 id="lvgl-移植到-esp32-s3" tabindex="-1">LVGL 移植到 <code>ESP32-S3</code> <a class="header-anchor" href="#lvgl-移植到-esp32-s3" aria-label="Permalink to &quot;LVGL 移植到 \`ESP32-S3\`&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">移植视频</p><p><a href="https://www.bilibili.com/video/BV1B1vbetEKx/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=2097425578c361917ecd9ca79dce6b72" target="_blank" rel="noreferrer">PlatformIO和arduino移植lvgl</a></p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>框架: Arduino 平台: platformIO 开发板: ESP32-S3 / T-display s3 lvgl版本: 8.3.10 platformIO esp32版本: 6.5.0</p></div><h2 id="platfromio-ini-配置" tabindex="-1"><code>platfromIO.ini</code> 配置 <a class="header-anchor" href="#platfromio-ini-配置" aria-label="Permalink to &quot;\`platfromIO.ini\` 配置&quot;">​</a></h2><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[env:esp32-s3-devkitc-1]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">platform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = espressif32</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">board</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = esp32-s3-devkitc-1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">framework</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = arduino</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">board_build.arduino.memory_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = qio_opi </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">board_build.f_flash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 80000000L</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">board_build.flash_mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = qio</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">build_flags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    -DBOARD_HAS_PSRAM</span></span></code></pre></div><h2 id="配置-tft-驱动" tabindex="-1">配置 TFT 驱动 <a class="header-anchor" href="#配置-tft-驱动" aria-label="Permalink to &quot;配置 TFT 驱动&quot;">​</a></h2><p>使用 <code>TFT_eSPI</code> 驱动</p><p><code>Github</code><a href="https://github.com/Xinyuan-LilyGO/T-Display-S3.git" target="_blank" rel="noreferrer">T-Display-S3</a></p><p>把配置号的 <code>TFT_eSPI</code> 库 放到 <code>lib</code> 文件夹下<br><code>T-Display-S3</code> 还有个 <code>pin_config.h</code> 文件专门针对 <code>TFT_eSPI</code> 驱动的引脚配置<br> 具体使用方法看 下面的链接 <a href="https://github.com/Xinyuan-LilyGO/T-Display-S3/tree/main/examples/tft" target="_blank" rel="noreferrer">T-Display-S3 / examples / tft /</a></p><h2 id="移植-lvgl" tabindex="-1">移植 LVGL <a class="header-anchor" href="#移植-lvgl" aria-label="Permalink to &quot;移植 LVGL&quot;">​</a></h2><p><code>Github</code><a href="https://github.com/lvgl/lvgl/releases/tag/v8.3.10" target="_blank" rel="noreferrer">LVGL Release v8.3.10</a></p><p>放到 <code>lib</code> 文件夹下</p><p>把 <code>lv_conf_template</code> 放到 <code>lib</code> 文件夹下 重命名为 <code>lv_conf.h</code></p><p>目录结构如下 <img src="`+l+'" alt=""></p><h3 id="修改-lv-conf-h" tabindex="-1">修改 <code>lv_conf.h</code> <a class="header-anchor" href="#修改-lv-conf-h" aria-label="Permalink to &quot;修改 `lv_conf.h`&quot;">​</a></h3><p>修改两个地方如图</p><p>15行 <code>if 0</code> 改为 <code>if 1</code> 表示开启 <code>LVGL</code> 中文库<br><img src="'+h+'" alt=""></p><p>88行 <code>define LV_TICK_CUSTOM 0</code> 改为 <code>define LV_TICK_CUSTOM 1</code> 表示开启 <code>LVGL</code> 自定义时钟<br><img src="'+p+'" alt=""></p><p>修改刷新时间为 <code>10</code> ms <img src="'+t+`" alt=""></p><h3 id="制作-lv-driver" tabindex="-1">制作 <code>lv_driver</code> <a class="header-anchor" href="#制作-lv-driver" aria-label="Permalink to &quot;制作 \`lv_driver\`&quot;">​</a></h3><ol><li>在 <code>lib</code> 文件夹下新建 <code>lv_driver</code> 文件夹</li><li>在 <code>.\\lib\\lvgl\\examples\\porting</code> 里找到 <code>lv_port_disp_templ.c</code> 复制到 <code>lv_driver</code> 文件夹下 重命名为 <code>lv_port_disp.cpp</code></li><li>在 <code>.\\lib\\lvgl\\examples\\porting</code> 里找到 <code>lv_port_disp_templ.h</code> 复制到 <code>lv_driver</code> 文件夹下 重命名为 <code>lv_port_disp.h</code></li><li><code>lv_port_disp.h</code> 添加头文件</li></ol><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lvgl.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;TFT_eSPI.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Arduino.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pin_config.h&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 这是 T-Display-S3 的引脚配置文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;esp_heap_caps.h&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 这是 esp32 的堆管理文件</span></span></code></pre></div><ol start="5"><li><code>lv_port_disp.cpp</code> 修改 1# 打开开关 <img src="`+e+'" alt=""> 2# 定义显示设备长宽 <img src="'+k+'" alt=""> 3# TFT_eSPI 初始化 <img src="'+d+'" alt=""><img src="'+r+`" alt=""> 4# disp flush 函数</li></ol><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> disp_flush</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lv_disp_drv_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">disp_drv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lv_area_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">area</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lv_color_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">color_p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // if (disp_flush_enabled)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*The most simple case (but also the slowest) to put all pixels to the screen one-by-one*/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        uint32_t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (area-&gt;x2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> area-&gt;x1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        uint32_t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (area-&gt;y2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> area-&gt;y1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tft.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startWrite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tft.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAddrWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(area-&gt;x1, area-&gt;y1, w, h);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tft.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pushColors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint16_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">color_p-&gt;full, w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tft.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">endWrite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        lv_disp_flush_ready</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(disp_drv);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /*IMPORTANT!!!</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *Inform the graphics library that you are ready with the flushing*/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // lv_disp_flush_ready(disp_drv);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="6"><li>缓存 选择双缓存 或者使用 <code>psram</code> 使用 <code>psram</code> 时 记得在 <code>platformIO.ini</code> 配置 <code>board_build.arduino.memory_type = qio_opi</code> <code>board_build.flash_mode = qio</code> <code>build_flags = -DBOARD_HAS_PSRAM</code> <code>board_build.f_flash = 80000000L</code> 这四个参数 <code>psram</code> 配置<div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">static</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lv_disp_draw_buf_t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> draw_buf_dsc_2;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">static</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lv_color_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buf_2_1_qio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">static</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lv_color_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buf_2_2_qio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buf_2_1_qio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lv_color_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">heap_caps_malloc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MY_DISP_HOR_RES </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lv_color_t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), MALLOC_CAP_SPIRAM);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buf_2_2_qio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lv_color_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">heap_caps_malloc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MY_DISP_HOR_RES </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lv_color_t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), MALLOC_CAP_SPIRAM);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lv_disp_draw_buf_init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">draw_buf_dsc_2, buf_2_1_qio, buf_2_2_qio, MY_DISP_HOR_RES </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /*Initialize the display buffer*/</span></span></code></pre></div>修改 <code>disp_drv.draw_buf</code> 为 <code>draw_buf_dsc_2</code><code>disp_drv.draw_buf = &amp;draw_buf_dsc_2;</code></li></ol><h3 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h3><p><code>main.cpp</code></p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;Arduino.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lv_port_disp.h&quot;</span></span></code></pre></div><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_port_disp_init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    lv_obj_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lv_label_create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lv_scr_act</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_label_set_text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(label, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_obj_align</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(label, LV_ALIGN_CENTER, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_obj_fade_in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(label, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    lv_obj_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">btn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lv_btn_create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lv_scr_act</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_obj_align</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btn, LV_ALIGN_CENTER, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_obj_set_size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btn, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_obj_fade_in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btn, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lv_task_handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>`,29),c=[o];function g(y,F,_,u,v,b){return a(),i("div",null,c)}const f=s(E,[["render",g]]);export{C as __pageData,f as default};
